package dk.sundhedsdatastyrelsen.ncpeh.service.undo; import lombok.NonNull; import org.apache.commons.codec.digest.DigestUtils; import java.time.Instant; public record UndoDispensationRow( @NonNull String cdaIdHash, @NonNull Long effectuationId, @NonNull Long orderId, Instant timestamp ) { public static UndoDispensationRow fromCdaId(String cdaId, Long effectuationId, Long orderId) { return new UndoDispensationRow( cdaIdHash(cdaId), effectuationId, orderId, null ); } public static String cdaIdHash(String cdaId) { return DigestUtils.sha256Hex(cdaId); } } 