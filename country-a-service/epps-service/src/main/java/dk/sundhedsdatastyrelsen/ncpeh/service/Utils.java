package dk.sundhedsdatastyrelsen.ncpeh.service; import javax.xml.datatype.DatatypeFactory; import javax.xml.datatype.XMLGregorianCalendar; import java.time.LocalDate; import java.time.ZoneId; import java.time.ZonedDateTime; import java.time.format.DateTimeFormatter; import java.util.GregorianCalendar; public class Utils { public static XMLGregorianCalendar parseEpsosTime(String ts) { ZonedDateTime zdt; if (ts.length() == 8) { var parsed = DateTimeFormatter.ofPattern("yyyyMMdd").parse(ts); return xmlGregorianCalendar(LocalDate.from(parsed)); } else { var parsed = DateTimeFormatter.ofPattern("yyyyMMddHHmmssX").parse(ts); return xmlGregorianCalendar(ZonedDateTime.from(parsed)); } } public static XMLGregorianCalendar xmlGregorianCalendar(ZonedDateTime zdt) { return DatatypeFactory.newDefaultInstance().newXMLGregorianCalendar(GregorianCalendar.from(zdt)); } public static XMLGregorianCalendar xmlGregorianCalendar(LocalDate date) { return xmlGregorianCalendar(date.atStartOfDay(ZoneId.of("Z"))); } } 